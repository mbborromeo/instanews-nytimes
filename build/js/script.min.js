document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementById("stories"),t=document.getElementById("category"),n=document.getElementsByTagName("header")[0],s=document.createElement("img");function r(t,n){const s=document.createElement("ul");for(let e=0;e<t;e++)if(n[e].multimedia[0].url){const t=document.createElement("li"),r=document.createElement("a");r.setAttribute("target","_blank"),r.setAttribute("href",n[e].url);const a=document.createElement("figure"),l=document.createElement("img");l.setAttribute("src",n[e].multimedia[0].url);const i=document.createElement("figcaption");i.innerText=n[e].abstract,a.append(l),a.append(i),r.append(a),t.append(r),s.append(t)}e.append(s)}s.setAttribute("id","loader"),s.setAttribute("src","images/ajax-loader.gif"),s.setAttribute("style","display:none"),e.append(s),t.addEventListener("change",(function(t){const a=this.value;if(n.setAttribute("class","shrink"),e.setAttribute("class","expand"),s.setAttribute("style","display:block"),document.querySelector("ul")){let e=document.querySelector("ul");e.setAttribute("display","none"),e.parentNode.removeChild(e)}$.ajax({method:"GET",url:`https://api.nytimes.com/svc/topstories/v2/${a}.json?api-key=BvCBQeH2bfwoKZ8Uabwe0ynMvv1yx8VZ`}).done((function(e){e.results.length>0&&(s.setAttribute("style","display:none"),e.results.length>12?r(12,e.results):r(e.results.length,e.results))})).fail((function(){alert("error with API call")}))}))}));