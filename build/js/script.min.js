document.addEventListener("DOMContentLoaded",(function(){const e=document.getElementById("stories"),t=document.getElementById("category"),n=document.getElementsByTagName("header")[0],a=document.getElementById("loader");t.addEventListener("change",(function(t){const l=this.value;n.setAttribute("class","shrink"),e.setAttribute("class","expand");let r=document.querySelector("ul");null!==r&&r.parentNode.removeChild(r),a.setAttribute("style","display:flex"),$.ajax({method:"GET",url:`https://api.nytimes.com/svc/topstories/v2/${l}.json?api-key=BvCBQeH2bfwoKZ8Uabwe0ynMvv1yx8VZ`}).done((function(t){if(t.results.length>0){!function(t){const n=document.createElement("ul");for(let e=0;e<t.length;e++){const a=document.createElement("li"),l=document.createElement("a");l.setAttribute("href",t[e].url),l.setAttribute("target","_blank");const r=document.createElement("figure"),i=document.createElement("img");i.setAttribute("src",t[e].multimedia[0].url),i.setAttribute("alt","Image "+e);const o=document.createElement("figcaption"),c=document.createElement("h2");c.innerText=t[e].title,o.append(c),o.append(t[e].abstract),r.append(i),r.append(o),l.append(r),a.append(l),n.append(a)}a.setAttribute("style","display:none"),e.append(n)}(t.results.filter(e=>e.multimedia&&e.multimedia.length&&e.multimedia[0].url).slice(0,12))}else e.innerText="No articles returned for category "+l})).fail((function(){alert("error with API call")}))}))}));